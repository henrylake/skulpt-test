<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdn.rawgit.com/skulpt/skulpt-dist/b55c9754/skulpt.min.js" type="text/javascript"></script>
<script src="https://cdn.rawgit.com/skulpt/skulpt-dist/b55c9754/skulpt-stdlib.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.6/processing.min.js" type="text/javascript"></script>
</head>



<body>

<script type="text/javascript">
// output functions are configurable.  This one just appends some text
// to a pre element.
function outf(text) {
    var mypre = document.getElementById("example2_pre");
    mypre.innerHTML = mypre.innerHTML + text;
}
function builtinRead(x) {
    // console.log(x)
    // console.log(Sk.builtinFiles.files[x])
    if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined) {
            console.log('not found')
            throw "File not found: '" + x + "'";
          }
    return Sk.builtinFiles["files"][x];
}
// Here's everything you need to run a python program in skulpt
// grab the code from your textarea
// get a reference to your pre element for output
// configure the output functions
// call Sk.importMainWithBody()
function runit() {
  var myDiv = 'example2'
  var prog = document.getElementById("yourcode").value;
  console.log(typeof(prog))
  var mypre = document.getElementById("example2_pre");
  mypre.innerHTML = '';
  Sk.canvas = myDiv+"_canvas";
  var can = document.getElementById(Sk.canvas);
  can.style.display = 'block';
  if (can) {
    can.width = can.width;
    if (Sk.tg) {
      Sk.tg.canvasInit = false;
      Sk.tg.turtleList = [];
    }
  }
  Sk.pre = myDiv+"_pre";
  Sk.configure({
    output: outf,
    read: builtinRead
  });
  var myPromise = Sk.misceval.asyncToPromise(function() {
    return Sk.importMainWithBody("<stdin>",false,prog,true);
  });
  myPromise.then(function() {}, function(err) {alert(err.toString())});
}
</script>

<h3>Try This</h3>
<form>
<textarea id="yourcode" cols="40" rows="20">
from processing import *

def setup():
    size(400,400)
    noStroke()
    smooth()
    noLoop()

def draw():
    drawCircle(200,170,6)

def drawCircle(x, radius, level):
    tt = 128.0 * level / 4.0
    fill(tt)
    ellipse(x, 200, radius*2, radius*2)
    if level > 1:
        level = level - 1
        drawCircle(x - radius / 2, radius/2, level)
        drawCircle(x + radius / 2, radius/2, level)

run()
</textarea><br />
<button type="button" onclick="runit()">Run</button>
</form>
<div id="example2_canvas" height="500" width="800" style="border-style: solid; display: none"></div>
<pre id="example2_pre"></pre>

</body>

</html>